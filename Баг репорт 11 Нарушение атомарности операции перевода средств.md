# Описание.
 При выполнении перевода (успешное списание, но неудачное зачисление) средства безвозвратно теряются в системе.

# Локация дефекта:
        

https://github.com/Alexander0713/Komandnyy-proyekt/blob/f2dbb2d1978b0270423be66de7734c22d4d6c416/src/main/java/ru/netology/javaqadiplom/Bank.java#L20-L21

# Шаги воспроизведения:

 
1. Открыть [код программы](https://github.com/Alexander0713/Komandnyy-proyekt/blob/7e01d1602ba0e7787782ab0ac6d54e4d04a0db01/src/main/java/ru/netology/javaqadiplom/SavingAccount.java#L44) в IDEA. 
1. Открыть класс для тестирования BankTest.java
1. Добавить тестовый метод
1. Создать сберегательный счет
Account from = new SavingAccount(1000, 0, 2000, 5)
1. Создать кредитный счет Account to = new CreditAccount(0, 1000, 5)
1. Выполнить перевод 
1. Запустить тест
1. Посмотреть результат в консоли

*Ожидаемый результат:* Деньги должны вернуться на счёт from (либо вся операция откатывается)

*Фактический результат:* Деньги списались с from, но не зачислились на to
# Тест для проверки:

  
    @Test  
    public void shouldRollbackWhenAddFails() {
    Account from = new SavingAccount(1000, 0, 2000, 5);
    Account to = new CreditAccount(0, 1000, 5) {
        @Override
        public boolean add(int amount) {
            return false; // Имитируем сбой при зачислении
        }
    };
    int amount = 500;
    
    boolean result = bank.transfer(from, to, amount);
    
    assertFalse(result);
    assertEquals(1000, from.getBalance()); // Деньги должны вернуться}

# Скриншот:

<img width="1641" height="982" alt="2025-11-10_19-17-34" src="https://github.com/user-attachments/assets/a47a530a-7c54-48c8-820e-442ce26393fe" />




# Окружение
* **Устройство:** ПК
* **Операционная система:** Windows 11,
* **Браузер:** Google Chrome Версия: 137.0.7151.120 (Официальная сборка)(64 бит)
* **JAVA:** OpenJDK 11
